.. Copyright (C) 2022 Cyb3rhq, Inc.

.. meta::
	:description: Check out this section about the local configuration of Cyb3rhq and learn about the configuration options of the Cyb3rhq-DB daemon.


.. _cyb3rhq-db-config:

cyb3rhq-db
========

.. topic:: XML section name

	.. code-block:: xml

		<wdb>
		</wdb>

Configuration options for the :ref:`cyb3rhq-db <cyb3rhq-db>` daemon.

Options
-------

- `backup`_

backup
^^^^^^

Configuration block to define the cyb3rhq-db databases backup behavior.


+--------------------+-----------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **Allowed tags**   | database  | Defines the database to backup.                                                                                                                                    |
|                    |           +--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
|                    |           | **Allowed values**             | global                                                                                                                            |
+--------------------+-----------+--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
| **Allowed values** | enabled   | Enables the regular backup of this particular database.                                                                                                            |
|                    |           +--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
|                    |           | **Default value**              | yes                                                                                                                               |
|                    |           +--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
|                    |           | **Allowed values**             | yes, no                                                                                                                           |
|                    +-----------+--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
|                    | interval  | How often the backup is created.                                                                                                                                   |
|                    |           +--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
|                    |           | **Default value**              | 1d                                                                                                                                |
|                    |           +--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
|                    |           | **Allowed values**             | A positive number that should contain a suffix character indicating a time unit: s (seconds), m (minutes), h (hours) or d (days). |
|                    +-----------+--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
|                    | max_files | The maximum number of simultaneous backups to store before deleting the oldest ones.                                                                               |
|                    |           +--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
|                    |           | **Default value**              | 3                                                                                                                                 |
|                    |           +--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
|                    |           | **Allowed values**             | A positive number.                                                                                                                |
+--------------------+-----------+--------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+

Example of configuration
------------------------

The following configuration will generate a backup of the **global.db** every day, with a maximum of 3 simultaneous files

.. code-block:: xml

    <wdb>
        <backup database='global'>
            <enabled>yes</enabled>
            <interval>1d</interval>
            <max_files>3</max_files>
        </backup>
    </wdb>
